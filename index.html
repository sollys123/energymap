<!DOCTYPE html>
<html   Ë∂ÖÊñáÊú¨Ê†áËÆ∞ËØ≠Ë®Ä    < html   Ë∂ÖÊñáÊú¨Ê†áËÆ∞ËØ≠Ë®Ä lang   Êúó = "Â∫îÁî®" >lang="zh-CN">
<head   Â§¥>
    <meta   ÂÖÉ charset   Â≠óÁ¨¶ÈõÜ="UTF-8"   ‚Äúutf - 8‚Äù>
    <meta   ÂÖÉ name   ÂêçÂ≠ó="viewport"   ‚ÄúËßÜÂè£‚Äù content   ÂÜÖÂÆπ="width=device-width, initial-scale=1.0"‚ÄúÂÆΩÂ∫¶=ËÆæÂ§áÂÆΩÂ∫¶,ÂàùÂßã= 1.0‚Äù>
    <title   Ê†áÈ¢ò>ÁîµÂäõÂ∏ÇÂú∫ÁªºÂêàÁÉ≠ÂäõÂõæ</title   Ê†áÈ¢ò>
    
    <!-- 1. Tailwind CSS -->
    < script   ËÑöÊú¨ src = " https://cdn.tailwindcss.com " > < /ËÑöÊú¨><script src="https://cdn.tailwindcss.com   Âíå"></script   ËÑöÊú¨>

    <!-- 2. React ÂÖ®ÂÆ∂Ê°∂ (Staticfile CDN) -->
    <script    ËÑöÊú¨crossorigin src="https://cdn.staticfile.net/react/18.2.0/umd/react.production.min.js"></script   ËÑöÊú¨>
    <script    ËÑöÊú¨crossorigin src="https://cdn.staticfile.net/react-dom/18.2.0/umd/react-dom.production.min.js"></script   ËÑöÊú¨>
    
    <!-- 3. Babel   Â∑¥Âà´Â°î (Staticfile CDN) -->
    <script    ËÑöÊú¨src="https://cdn.staticfile.net/babel-standalone/7.22.20/babel.min.js"></script   ËÑöÊú¨>
    
    <!-- 4. ECharts (Staticfile CDN) -->
    <script    ËÑöÊú¨src="https://cdn.staticfile.net/echarts/5.4.3/echarts.min.js"></script   ËÑöÊú¨>

       < >È£éÊ†º<style   È£éÊ†º>
        ::-webkit-scrollbar   ÊªöÂä®Êù° { width   ÂÆΩÂ∫¶: 6px; height   È´òÂ∫¶: 6px; }
        ::-webkit-scrollbar   ÊªöÂä®Êù°-track   Ë∑üË∏™ { background   ËÉåÊôØ: #f1f5f9; }
        ::-webkit-scrollbar   ÊªöÂä®Êù°-thumb   ÊãáÊåá { background   ËÉåÊôØ: #cbd5e1; border   ËæπÂ¢É-radius   ÂçäÂæÑ: 3px; }
        ::-webkit-scrollbar   ÊªöÂä®Êù°-thumb   ÊãáÊåá:hover { background   ËÉåÊôØ: #94a3b8; }
        .fade-in   Âú® { animation   Âä®Áîª: fadeIn 0.5s   Âπ¥‰ª£ ease   ÁºìËß£-in-out; }
        @keyframes   ÂÖ≥ÈîÆÂ∏ß fadeIn { from    ‰ªé{ opacity   ‰∏çÈÄèÊòéÂ∫¶: 0; } to { opacity   ‰∏çÈÄèÊòéÂ∫¶: 1; } }
       > < /È£éÊ†º</style   È£éÊ†º>
</head>
<body    Ë∫´‰Ωìclass   Á±ª="bg-slate-50">
    <div id="root"></div>

    <script    ËÑöÊú¨type   Á±ªÂûã="text/babel">
        const   Â∏∏Èáè { useState, useEffect, useRef, useMemo } = React   ÂèçÂ∫î;

        // --- ÂõæÊ†áÁªÑ‰ª∂ ---
        const IconWrapper = ({ children, size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const X = (props) => (<IconWrapper {...props}><path d="M18 6 6 18"/><path d="m6 6 12 12"/></IconWrapper>);
        const Activity = (props) => (<IconWrapper {...props}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></IconWrapper>);
        const TrendingUp = (props) => (<IconWrapper {...props}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></IconWrapper>);
        const BarChart3 = (props) => (<IconWrapper {...props}><path d="M3 3v18h18"/><path d="M18 17V9"/><path d="M13 17V5"/><path d="M8 17v-3"/></IconWrapper>);
        const Coins = (props) => (<IconWrapper {...props}><circle cx="8" cy="8" r="6"/><path d="M18.09 10.37A6 6 0 1 1 10.34 18"/><path d="M7 6h1v4"/><path d="m16.71 13.88.7.71-2.82 2.82"/></IconWrapper>);
        const Zap = (props) => (<IconWrapper {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></IconWrapper>);
        const ArrowLeft = (props) => (<IconWrapper {...props}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></IconWrapper>);
        const MapIcon = (props) => (<IconWrapper {...props}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21"/><line x1="9" x2="9" y1="3" y2="18"/><line x1="15" x2="15" y1="6" y2="21"/></IconWrapper>);
        const ChevronLeft = (props) => (<IconWrapper {...props}><path d="m15 18-6-6 6-6"/></IconWrapper>);
        const ChevronRight = (props) => (<IconWrapper {...props}><path d="m9 18 6-6-6-6"/></IconWrapper>);
        const Layers = (props) => (<IconWrapper {...props}><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></IconWrapper>);
        const BatteryCharging = (props) => (<IconWrapper {...props}><path d="M5 18H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h3.19M15 6h2a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-3.19"/><line x1="23" x2="23" y1="13" y2="11"/><polyline points="11 6 7 12 13 12 9 18"/></IconWrapper>);

        const EnergyMarketMap = () => {
            const mapContainerRef = useRef(null);
            const chartInstanceRef = useRef(null);
            
            // --- Ê†∏ÂøÉÁä∂ÊÄÅ ---
            const [marketType, setMarketType] = useState('frequency'); // 'frequency' (‰∫åÊ¨°Ë∞ÉÈ¢ë) | 'energy' (ÁîµËÉΩÈáè)
            const [viewMode, setViewMode] = useState('china'); // 'china' | 'province'
            const [currentProvince, setCurrentProvince] = useState(null);
            const [selectedProvinceInfo, setSelectedProvinceInfo] = useState(null);
            const [loading, setLoading] = useState(true);
            const [isSidebarOpen, setIsSidebarOpen] = useState(true);

            // --- ÁúÅ‰ªΩ Adcode Êò†Â∞Ñ ---
            const adcodeMap = {
                'Ê≤≥ÂåóÁúÅ': 130000, 'Â±±Ë•øÁúÅ': 140000, 'Âπø‰∏úÁúÅ': 440000,
                'ÁîòËÇÉÁúÅ': 620000, 'Ê≤≥ÂçóÁúÅ': 410000, 'ÂÆÅÂ§èÂõûÊóèËá™Ê≤ªÂå∫': 640000
            };

            // --- ÈÖçÁΩÆÂÆö‰πâ ---
            
            // 1. È¢úËâ≤ÈÖçÁΩÆ (Ê†πÊçÆÂ∏ÇÂú∫Á±ªÂûãÂàáÊç¢)
            const colorPalettes = {
                frequency: {
                    // Á∫¢/Ê©ô/ÈªÑÊöñËâ≤Á≥ª (‰ª£Ë°®ÁÉ≠Â∫¶/Êî∂Áõä)
                    map: ['#991b1b', '#dc2626', '#ea580c', '#fbbf24', '#fef08a'], 
                    highlight: '#d97706',
                    iconBg: 'bg-red-50', iconText: 'text-red-600', iconBorder: 'border-red-100',
                    gradientFrom: 'from-red-600', gradientTo: 'to-orange-500'
                },
                energy: {
                    // Ëìù/Á¥´ÂÜ∑Ëâ≤Á≥ª (‰ª£Ë°®ÁîµÈáè/Ë¥üËç∑)
                    map: ['#1e1b4b', '#312e81', '#4338ca', '#6366f1', '#a5b4fc'], 
                    highlight: '#4f46e5',
                    iconBg: 'bg-indigo-50', iconText: 'text-indigo-600', iconBorder: 'border-indigo-100',
                    gradientFrom: 'from-indigo-600', gradientTo: 'to-blue-500'
                }
            };

            const currentPalette = colorPalettes[marketType];

            // 2. ÁÇπ‰ΩçÁ±ªÂûãÈÖçÁΩÆ
            const pointTypeConfig = {
                'N': { color: '#22c55e', symbol: 'circle', label: 'Êñ∞ËÉΩÊ∫ê (È£é/ÂÖâ)', beltColor: '#86efac' },
                'F': { color: '#7e22ce', symbol: 'rect', label: 'ÁÅ´Áîµ/ÁÖ§Áîµ', beltColor: '#d8b4fe' },
                'S': { color: '#0ea5e9', symbol: 'triangle', label: 'Ë∞ÉËäÇ/Ê∞¥Áîµ/Ê†∏Áîµ', beltColor: '#7dd3fc' },
                // ÁîµËÉΩÈáèÂ∏ÇÂú∫ÂèØËÉΩÁî®Âà∞ÁöÑÊñ∞Á±ªÂûã (È¢ÑÁïô)
                'L': { color: '#f59e0b', symbol: 'diamond', label: 'Ë¥üËç∑‰∏≠ÂøÉ', beltColor: '#fcd34d' } 
            };

            // --- Êï∞ÊçÆÊ∫ê ---

            // A. ‰∫åÊ¨°Ë∞ÉÈ¢ëÊï∞ÊçÆ (Frequency Data) - Ê≤øÁî®‰πãÂâçÁöÑÊï∞ÊçÆ
            const frequencyData = {
                mapValues: {
                    'Ê≤≥ÂåóÁúÅ': 5000, 'Ê≤≥ÂçóÁúÅ': 4000, 'Âπø‰∏úÁúÅ': 5000, 
                    'Â±±Ë•øÁúÅ': 4100, 'ÁîòËÇÉÁúÅ': 2500, 'ÂÆÅÂ§èÂõûÊóèËá™Ê≤ªÂå∫': 500
                },
                details: {
                    'Ê≤≥ÂåóÁúÅ': {
                        title: 'Ê≤≥ÂåóÁúÅ (ÂçóÁΩë)', totalVolume: '5000‰∏áÂÖÉ (ÂÇ®ËÉΩ‰ªΩÈ¢ù)',
                        marketVolumeDisplay: 'ÊØèÊúàÂÇ®ËÉΩÂàÜÊëä‰ªΩÈ¢ùÁ∫¶ 5000‰∏áÂÖÉ',
                        tags: ['ÁÉ≠Â∫¶ÊúÄÈ´ò', '2026ÂºÄÊîæ'],
                        details: [{ label: 'Êï∞ÊçÆÊù•Ê∫ê', value: 'Ê≤≥ÂåóÂçóÁΩë‰∫§Êòì‰∏≠ÂøÉÂ∏ÇÂú∫Â§Ñ‰∏ª‰ªª' }]
                    },
                    'Ê≤≥ÂçóÁúÅ': {
                        title: 'Ê≤≥ÂçóÁúÅ', totalVolume: '4000‰∏áÂÖÉ (ÂÇ®ËÉΩ‰ªΩÈ¢ù)',
                        marketVolumeDisplay: 'ÊØèÊúàÂÇ®ËÉΩÂàÜÊëä‰ªΩÈ¢ùÁ∫¶ 4000‰∏áÂÖÉ',
                        tags: ['ÁÉ≠Â∫¶È´ò', '2027ÂºÄÊîæ'],
                        details: [{ label: 'Êï∞ÊçÆÊù•Ê∫ê', value: 'Ê≤≥ÂçóË∞ÉÂ∫¶ËÆ°ÂàíÂ§Ñ‰∏ª‰ªª' }]
                    },
                    'Âπø‰∏úÁúÅ': {
                        title: 'Âπø‰∏úÁúÅ', totalVolume: '5000‰∏áÂÖÉ',
                        marketVolumeDisplay: 'ÊØèÊúàÁã¨Á´ãÂÇ®ËÉΩÂ∏ÇÂú∫ÊÄªÈáè 5000‰∏áÂÖÉÂ∑¶Âè≥',
                        tags: ['Êï∞ÊçÆËØ¶ÂÆû', 'Êî∂ÁõäÂç†ÊØî90%'],
                        details: [{ label: 'Êï∞ÊçÆÊù•Ê∫ê', value: '5-7ÊúàÊî∂ÁõäË°®' }]
                    },
                    'Â±±Ë•øÁúÅ': {
                        title: 'Â±±Ë•øÁúÅ', totalVolume: '4100‰∏áÂÖÉ',
                        marketVolumeDisplay: 'ÊØèÊúàÂ∏ÇÂú∫ÊÄªÈáè 4100‰∏áÂÖÉ',
                        tags: ['Â∏ÇÂú∫ÊàêÁÜü', 'Âç†ÊØî80%'],
                        details: [{ label: 'Êï∞ÊçÆÊù•Ê∫ê', value: 'ÂÆûÂú∞Ë∞ÉÁ†î (1-3ÊúàÊî∂ÁõäË°®)' }]
                    },
                    'ÁîòËÇÉÁúÅ': {
                        title: 'ÁîòËÇÉÁúÅ', totalVolume: '2500‰∏áÂÖÉ',
                        marketVolumeDisplay: 'ÊØèÊúàÂÖ®Â∏ÇÂú∫Ë∞ÉÈ¢ëÊÄªÈáëÈ¢ù 2500-2600‰∏áÂÖÉ',
                        tags: ['Ë∂ãÂäø‰∏äÊ∂®', 'ÂçäÂÖ¨ÂºÄÊä´Èú≤'],
                        details: [{ label: 'Êï∞ÊçÆÊù•Ê∫ê', value: 'ÁîòËÇÉÁîµÂäõ‰∫§Êòì‰∏≠ÂøÉÂçäÂÖ¨ÂºÄÊä´Èú≤‰ø°ÊÅØ' }]
                    },
                    'ÂÆÅÂ§èÂõûÊóèËá™Ê≤ªÂå∫': {
                        title: 'ÂÆÅÂ§èÂõûÊóèËá™Ê≤ªÂå∫', totalVolume: '500‰∏áÂÖÉ',
                        marketVolumeDisplay: 'ÊØèÊúàÊÄªÈáè 500‰∏áÂÖÉÂ∑¶Âè≥',
                        tags: ['Ê∂®ÂπÖ‰∏çÂ§ß', 'Âç†ÊØî5%'],
                        details: [{ label: 'Êï∞ÊçÆÊù•Ê∫ê', value: 'ÂÆûÂú∞Ë∞ÉÁ†î' }]
                    }
                },
                provincePoints: {
                    'ÁîòËÇÉÁúÅ': [
                        { name: 'Èôá‰∏úÂü∫Âú∞', coord: [107.63, 35.73], type: 'F', label: 'Èôá‰∏úÁÖ§ÁîµÂü∫Âú∞', desc: 'ÂùëÂè£ÁÖ§Áîµ+Â§ñÈÄÅ‰∏≠ÂøÉ' },
                        { name: 'ÂàòÂÆ∂Â≥°', coord: [103.35, 35.93], type: 'S', label: 'ÈªÑÊ≤≥Ê¢ØÁ∫ßÊ∞¥Áîµ', desc: 'ÂàòÂÆ∂Â≥°Ë∞ÉÂ≥∞‰∏ªÂäõ' }
                    ],
                    'ÂÆÅÂ§èÂõûÊóèËá™Ê≤ªÂå∫': [
                        { name: 'ÂÆÅ‰∏úÂü∫Âú∞', coord: [106.66, 38.16], type: 'F', label: 'ÂÆÅ‰∏úËÉΩÊ∫êÂåñÂ∑•', desc: 'ÁÖ§Áîµ+ÂåñÂ∑•+ÂÖâ‰ºè' },
                        { name: 'ËÖæÊ†ºÈáå', coord: [105.00, 37.60], type: 'N', label: 'ËÖæÊ†ºÈáåÂü∫Âú∞', desc: 'Ê≤ôÊº†ÂÖâ‰ºè/È£éÁîµ' },
                        { name: '‰∏≠ÂÆÅÊç¢ÊµÅÁ´ô', coord: [105.67, 37.48], type: 'S', label: '‰∏≠ÂÆÅÊç¢ÊµÅÁ´ô', desc: 'ÂÆÅÁîµÂÖ•ÊπòÈÄÅÁ´Ø' }
                    ],
                    'Ê≤≥ÂçóÁúÅ': [
                        { name: 'Âπ≥È°∂Â±±', coord: [113.19, 33.76], type: 'F', label: 'Âπ≥È°∂Â±±ÁÖ§Áîµ', desc: '‰∏≠ÂéüÁÖ§Áîµ‰∏≠ÂøÉ' },
                        { name: 'Ë±´Ë•øÈ£éÁîµ', coord: [111.50, 34.50], type: 'N', label: 'Ë±´Ë•øÈ£éÁîµ', desc: 'Ê¥õÈò≥Ë•øÈÉ®Â±±Âå∫' },
                        { name: 'Ë±´‰∏úÂÖâ‰ºè', coord: [114.50, 34.60], type: 'N', label: 'Ë±´‰∏úÂÖâ‰ºè', desc: 'ÂºÄÂ∞ÅÂë®ËæπÈõÜ‰∏≠Âºè' }
                    ],
                    'Ê≤≥ÂåóÁúÅ': [
                        { name: 'Áü≥ÂÆ∂Â∫Ñ', coord: [114.48, 38.03], type: 'F', label: 'Áü≥ÂÆ∂Â∫ÑÁÉ≠Áîµ', desc: 'ÁúÅ‰ºöË¥üËç∑‰∏≠ÂøÉ' },
                        { name: 'ÂÜÄÂçóÂÖâ‰ºè', coord: [115.68, 37.73], type: 'N', label: 'ÂÜÄÂçóÂÖâ‰ºè', desc: 'Ë°°Ê∞¥Âπ≥ÂéüÂÖâ‰ºèÂ∏¶' }
                    ],
                    'Âπø‰∏úÁúÅ': [
                        { name: 'Á≤§Ë•øÁÖ§Áîµ', coord: [110.35, 21.27], type: 'F', label: 'Á≤§Ë•øÁÖ§Áîµ', desc: 'ÊπõÊ±üÊ≤øÊµ∑Âü∫Âú∞' },
                        { name: 'Á≤§‰∏úÁÖ§Áîµ', coord: [116.37, 23.55], type: 'F', label: 'Á≤§‰∏úÁÖ§Áîµ', desc: 'Êè≠Èò≥/ÊÉ†Êù•Âü∫Âú∞' },
                        { name: 'Èò≥Ê±üÈ£éÁîµ', coord: [111.98, 21.4], type: 'N', label: 'Èò≥Ê±üÊµ∑‰∏äÈ£éÁîµ', desc: 'ËøëÊµ∑È£éÁîµÈõÜÁæ§' },
                        { name: 'Ê±ïÂ∞æÈ£éÁîµ', coord: [115.6, 22.6], type: 'N', label: 'Ê±ïÂ∞æÊµ∑‰∏äÈ£éÁîµ', desc: 'Áî≤Â≠êÊµ∑Âüü' }
                    ]
                },
                provinceBelts: {
                    'ÁîòËÇÉÁúÅ': [{ name: 'Ê≤≥Ë•øËµ∞ÂªäÊñ∞ËÉΩÊ∫êÂ∏¶', type: 'N', coords: [[98.50, 39.75], [96.5, 40.5]], label: 'ÈÖíÊ≥â-ÁìúÂ∑û-ÁéâÈó® Âü∫Âú∞Â∏¶' }],
                    'Ê≤≥ÂçóÁúÅ': [{ name: 'Ë±´ÂåóÁÖ§ÁîµÂ∏¶', type: 'F', coords: [[114.35, 36.10], [114.29, 35.74]], label: 'ÂÆâÈò≥-Èπ§Â£Å ÁÖ§ÁîµÂ∏¶' }],
                    'Ê≤≥ÂåóÁúÅ': [{ name: 'ÂÜÄÂçóÈí¢ÈìÅÁÖ§ÁîµÂ∏¶', type: 'F', coords: [[114.50, 37.06], [114.47, 36.60]], label: 'ÈÇ¢Âè∞-ÈÇØÈÉ∏ ÁÖ§ÁîµÈí¢ÈìÅÂ∏¶' }],
                    'Âπø‰∏úÁúÅ': [{ name: 'Áè†Ê±üÂè£Ê†∏ÁîµËµ∞Âªä', type: 'S', coords: [[112.93, 21.92], [114.54, 22.60], [114.8, 22.7]], label: 'Áè†Ê±üÂè£Ê†∏ÁîµËµ∞Âªä' }]
                }
            };

            // B. ÁîµËÉΩÈáèÊï∞ÊçÆ (Energy Data) - ÁõÆÂâç‰∏∫Á©∫/Âç†‰ΩçÔºåÁ≠âÂæÖÊÇ®Â°´ÂÖÖ
            const energyData = {
                mapValues: {
                    // Á§∫‰æãÂç†‰ΩçÔºöÂÅáËÆæ‰∏Ä‰∫õÁúÅ‰ªΩÊúâÁîµËÉΩÈáèÊï∞ÊçÆÔºåÁî®‰∏çÂêåÁöÑÊï∞ÂÄºËåÉÂõ¥
                    'Ê±üËãèÁúÅ': 8000, 'Â±±‰∏úÁúÅ': 7500, 'Âπø‰∏úÁúÅ': 9000, 'ÊµôÊ±üÁúÅ': 7000
                },
                details: {
                    'Âπø‰∏úÁúÅ': {
                        title: 'Âπø‰∏úÁúÅ (ÁîµËÉΩÈáè)', totalVolume: 'ÂæÖÂ°´ÂÖÖ',
                        marketVolumeDisplay: 'Áé∞Ë¥ßÂ∏ÇÂú∫‰∫§ÊòìÊ¥ªË∑É',
                        tags: ['Áé∞Ë¥ßËØïÁÇπ', 'Ë¥üËç∑‰∏≠ÂøÉ'],
                        details: [{ label: 'ËØ¥Êòé', value: 'Á≠âÂæÖÂΩïÂÖ•ÂÖ∑‰ΩìÊï∞ÊçÆ' }]
                    }
                    // ... Êõ¥Â§öÁúÅ‰ªΩ
                },
                provincePoints: {
                    // Á≠âÂæÖÂΩïÂÖ•
                },
                provinceBelts: {
                    // Á≠âÂæÖÂΩïÂÖ•
                }
            };

            // --- ËæÖÂä©Êï∞ÊçÆ ---
            const deepBlueProvinces = ['Ê±üËãèÁúÅ', 'ÊµôÊ±üÁúÅ', 'ÂÆâÂæΩÁúÅ', 'Â±±‰∏úÁúÅ']; 
            const blueProvinces = ['Ë¥µÂ∑ûÁúÅ', '‰∫ëÂçóÁúÅ', 'ÂπøË•øÂ£ÆÊóèËá™Ê≤ªÂå∫', 'ÊπñÂçóÁúÅ', 'ÊπñÂåóÁúÅ', 'Ê±üË•øÁúÅ', 'ÂÜÖËíôÂè§Ëá™Ê≤ªÂå∫'];
            const lightBlueProvinces = ['Êñ∞ÁñÜÁª¥ÂêæÂ∞îËá™Ê≤ªÂå∫', 'ÈªëÈæôÊ±üÁúÅ', 'ÂêâÊûóÁúÅ', 'ËæΩÂÆÅÁúÅ', 'ÈùíÊµ∑ÁúÅ'];

            // --- Êï∞ÊçÆÈÄâÊã©ÈÄªËæë ---
            const currentData = marketType === 'frequency' ? frequencyData : energyData;

            // --- Êï∞ÊçÆËΩ¨Êç¢ÂáΩÊï∞ ---
            const convertPointData = (data) => {
                if(!data) return [];
                return data.map(item => {
                    const cfg = pointTypeConfig[item.type];
                    return {
                        name: item.name,
                        value: item.coord.concat(100),
                        symbol: cfg?.symbol || 'circle',
                        itemStyle: { 
                            color: cfg?.color || '#666', 
                            borderColor: '#fff', borderWidth: 2, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.5)' 
                        },
                        tooltipData: item
                    };
                });
            };
            const convertBeltBorderData = (data) => data ? data.map(item => ({ coords: item.coords, name: item.label })) : [];
            const convertBeltFillData = (data) => {
                if(!data) return [];
                return data.map(item => {
                    const cfg = pointTypeConfig[item.type];
                    return {
                        coords: item.coords,
                        lineStyle: { color: cfg?.beltColor || '#ccc' },
                        name: item.label,
                        tooltipData: { label: item.label, desc: 'Âå∫Âüü/Ëµ∞Âªä/‰∫ß‰∏öÂ∏¶', type: item.type }
                    };
                });
            };
            
            // ÁîüÊàêÁÉ≠ÂäõÂõæÊï∞ÊçÆ (Ê†πÊçÆÂΩìÂâçÂ∏ÇÂú∫Á±ªÂûã)
            const generateMapData = () => {
                const data = [];
                const values = currentData.mapValues || {};
                Object.keys(values).forEach(name => data.push({ name: name, value: values[name] }));
                
                // Âè™ÊúâÂú®Ë∞ÉÈ¢ëÂ∏ÇÂú∫Êó∂ÊâçÊòæÁ§∫Ëøô‰∫õÁâπÂÆöÁöÑËìùÊ¢ØÈòüËÉåÊôØÔºüÊàñËÄÖÁîµËÉΩÈáèÂ∏ÇÂú∫‰πüÁî®Ôºü
                // ÊöÇÊó∂ÂÅáËÆæÂè™ÊúâË∞ÉÈ¢ëÂ∏ÇÂú∫ÊúâÊòéÁ°ÆÁöÑÊ¢ØÈòüÊ¶ÇÂøµÔºåÁîµËÉΩÈáèÂ∏ÇÂú∫Âè™ÊòæÁ§∫ÊúâÊï∞ÊçÆÁöÑÁúÅ‰ªΩ
                if (marketType === 'frequency') {
                    deepBlueProvinces.forEach(name => !values[name] && data.push({ name, value: -3 }));
                    blueProvinces.forEach(name => !values[name] && data.push({ name, value: -2 }));
                    lightBlueProvinces.forEach(name => !values[name] && data.push({ name, value: -1 }));
                }
                return data;
            };

            // --- Âä†ËΩΩÂú∞Âõæ ---
            const loadMap = async (mode, provinceName = null) => {
                setLoading(true);
                try {
                    let geoJsonUrl = 'https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json';
                    let mapName = 'china';

                    if (mode === 'province' && provinceName) {
                        const adcode = adcodeMap[provinceName];
                        if (adcode) {
                            geoJsonUrl = `https://geo.datav.aliyun.com/areas_v3/bound/${adcode}_full.json`;
                            mapName = provinceName;
                        }
                    }

                    const response = await fetch(geoJsonUrl);
                    const geoJson = await response.json();
                    
                    if (!window.echarts) return;
                    
                    window.echarts.registerMap(mapName, geoJson);
                    
                    if (chartInstanceRef.current) {
                        chartInstanceRef.current.dispose();
                    }
                    
                    const chart = window.echarts.init(mapContainerRef.current);
                    chartInstanceRef.current = chart;

                    let option = {};

                    if (mode === 'china') {
                        // === ÂÖ®ÂõΩËßÜÂõæ ===
                        // Ê†πÊçÆÂ∏ÇÂú∫Á±ªÂûãÂä®ÊÄÅËÆæÁΩÆ VisualMap È¢úËâ≤
                        const pieces = marketType === 'frequency' ? [
                            { min: 4900, label: '5000‰∏á', color: currentPalette.map[0] }, 
                            { min: 4050, max: 4899, label: '4100‰∏á', color: currentPalette.map[1] }, 
                            { min: 3000, max: 4049, label: '4000‰∏á', color: currentPalette.map[2] }, 
                            { min: 1000, max: 2999, label: '2500‰∏á', color: currentPalette.map[3] }, 
                            { min: 0, max: 999, label: '500‰∏á', color: currentPalette.map[4] }, 
                            { value: -3, label: 'Á¨¨‰∏ÄÊ¢ØÈòü', color: '#1d4ed8' },
                            { value: -2, label: 'Á¨¨‰∫åÊ¢ØÈòü', color: '#60a5fa' },
                            { value: -1, label: 'Á¨¨‰∏âÊ¢ØÈòü', color: '#bfdbfe' }
                        ] : [
                            // ÁîµËÉΩÈáèÂ∏ÇÂú∫ÁöÑ VisualMap (Á§∫‰æãËìùÁ¥´Ëâ≤Á≥ª)
                            { min: 8000, label: 'ÁâπÈ´ò', color: currentPalette.map[0] },
                            { min: 6000, max: 7999, label: 'È´ò', color: currentPalette.map[1] },
                            { min: 4000, max: 5999, label: '‰∏≠', color: currentPalette.map[2] },
                            { min: 2000, max: 3999, label: '‰Ωé', color: currentPalette.map[3] },
                            { min: 0, max: 1999, label: 'Âæà‰Ωé', color: currentPalette.map[4] }
                        ];

                        option = {
                            backgroundColor: 'transparent',
                            grid: { left: '5%', right: '5%', top: '5%', bottom: '5%' },
                            tooltip: {
                                trigger: 'item',
                                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                                borderColor: '#e2e8f0', borderWidth: 1, padding: 12, textStyle: { color: '#1e293b' },
                                formatter: (params) => {
                                    if (params.seriesType === 'map') {
                                        if (!params.value) return `<div style="color:#94a3b8">${params.name} <br/>ÊöÇÊó†Êï∞ÊçÆ</div>`;
                                        let colorDot = `<span style="display:inline-block;margin-right:6px;border-radius:50%;width:8px;height:8px;background-color:${params.color};"></span>`;
                                        if (params.value > 0) {
                                            const info = currentData.details[params.name] || {};
                                            const volume = info.totalVolume || params.value;
                                            return `<div style="font-weight:bold; font-size:14px; margin-bottom:4px;">${params.name}</div>
                                                    <div style="font-size:12px; color:#475569; margin-bottom:6px;">${colorDot} ÊÄªÈáè: <span style="font-weight:bold; color:${currentPalette.map[1]};">${volume}</span></div>
                                                    <div style="font-size:12px; color:#0ea5e9; font-weight:500; border-top:1px solid #f1f5f9; padding-top:4px;">üñ± ÁÇπÂáªËøõÂÖ•ËØ¶ÊÉÖ</div>`;
                                        }
                                        return `<div style="font-weight:bold; font-size:14px; margin-bottom:4px;">${params.name}</div>`;
                                    }
                                }
                            },
                            visualMap: { show: false, type: 'piecewise', pieces: pieces },
                            geo: {
                                map: 'china', roam: true, zoom: 1.2, center: [104.114129, 37.550339],
                                label: { show: true, fontSize: 10, color: 'rgba(0,0,0,0.5)' },
                                itemStyle: { areaColor: '#f8fafc', borderColor: '#cbd5e1', borderWidth: 1 },
                                emphasis: { label: { show: true, color: '#fff' }, itemStyle: { areaColor: currentPalette.highlight } }
                            },
                            series: [{ name: 'Â∏ÇÂú∫ÂàÜÂ∏É', type: 'map', geoIndex: 0, data: generateMapData(), selectedMode: false }]
                        };
                    } else {
                        // === ÁúÅ‰ªΩËßÜÂõæ ===
                        const pPoints = (currentData.provincePoints || {})[provinceName] || [];
                        const pBelts = (currentData.provinceBelts || {})[provinceName] || [];

                        option = {
                            backgroundColor: 'transparent',
                            tooltip: {
                                trigger: 'item',
                                backgroundColor: 'rgba(255, 255, 255, 0.95)',
                                borderColor: '#e2e8f0', borderWidth: 1, padding: 12, textStyle: { color: '#1e293b' },
                                formatter: (params) => {
                                    if (params.seriesType === 'effectScatter' || (params.seriesType === 'lines' && params.seriesName === 'ËÉΩÊ∫êËµ∞Âªä')) {
                                        const d = params.data.tooltipData;
                                        const typeInfo = pointTypeConfig[d.type] || { label: 'Êú™Áü•' };
                                        return `<div style="font-weight:bold; margin-bottom:2px; color:${params.color}">${d.label}</div>
                                                <div style="font-size:12px;color:#64748b; margin-bottom:4px;">${d.desc || ''}</div>
                                                <div style="font-size:10px;color:#94a3b8;">Á±ªÂûã: ${typeInfo.label}</div>`;
                                    }
                                    return params.name;
                                }
                            },
                            geo: {
                                map: mapName, roam: true, zoom: 1.0,
                                label: { show: true, color: '#64748b' },
                                itemStyle: { areaColor: '#e2e8f0', borderColor: '#94a3b8', borderWidth: 1.5, shadowColor: 'rgba(0, 0, 0, 0.2)', shadowBlur: 10 },
                                emphasis: { itemStyle: { areaColor: '#cbd5e1' }, label: { color: '#0f172a' } }
                            },
                            series: [
                                {
                                    name: 'ËÉΩÊ∫êËµ∞ÂªäËæπÊ°Ü', type: 'lines', coordinateSystem: 'geo', polyline: true,
                                    data: convertBeltBorderData(pBelts),
                                    lineStyle: { width: 26, color: 'rgba(255, 255, 255, 0.95)', cap: 'round', join: 'round', shadowBlur: 8, shadowColor: 'rgba(255, 255, 255, 0.8)' },
                                    silent: true, zlevel: 1.5
                                },
                                {
                                    name: 'ËÉΩÊ∫êËµ∞Âªä', type: 'lines', coordinateSystem: 'geo', polyline: true,
                                    data: convertBeltFillData(pBelts),
                                    lineStyle: { width: 20, opacity: 0.65, cap: 'round', join: 'round' },
                                    silent: false, zlevel: 1.6
                                },
                                {
                                    name: 'ËÉΩÊ∫êÂü∫Âú∞', type: 'effectScatter', coordinateSystem: 'geo',
                                    data: convertPointData(pPoints),
                                    symbolSize: 18, showEffectOn: 'render', rippleEffect: { brushType: 'fill', scale: 2 },
                                    hoverAnimation: true, label: { show: false }, zlevel: 2
                                }
                            ]
                        };
                    }

                    chart.setOption(option);
                    setLoading(false);

                    chart.off('click');
                    chart.on('click', (params) => {
                        if (mode === 'china') {
                            if (params.componentType !== 'series' || params.seriesType !== 'map') return;
                            const clickedName = params.name;
                            if (adcodeMap[clickedName] && currentData.details[clickedName]) {
                                setCurrentProvince(clickedName);
                                setSelectedProvinceInfo(currentData.details[clickedName]);
                                setViewMode('province');
                            } else {
                                const provinceInfo = currentData.details[clickedName];
                                if (provinceInfo) {
                                    setSelectedProvinceInfo(provinceInfo);
                                } else {
                                    // ÁÆÄÂçïÁöÑfallbackÂ§ÑÁêÜÔºåÁîµËÉΩÈáèÂ∏ÇÂú∫ÂèØËÉΩÊ≤°ÊúâÊ¢ØÈòü‰ø°ÊÅØ
                                    if (marketType === 'frequency') {
                                        // ... ÂéüÊúâÁöÑÊ¢ØÈòüÈÄªËæë ...
                                        setSelectedProvinceInfo(null);
                                    } else {
                                        setSelectedProvinceInfo(null);
                                    }
                                }
                            }
                        }
                    });

                } catch (error) {
                    console.error('Map loading failed:', error);
                    setLoading(false);
                }
            };

            // ÁõëÂê¨ÂèòÂåñ
            useEffect(() => {
                loadMap(viewMode, currentProvince);
            }, [viewMode, currentProvince, marketType]); // Â¢ûÂä† marketType ‰æùËµñ

            // ÂàáÊç¢Â∏ÇÂú∫Êó∂ÈáçÁΩÆËßÜÂõæ
            useEffect(() => {
                setViewMode('china');
                setCurrentProvince(null);
                setSelectedProvinceInfo(null);
            }, [marketType]);

            useEffect(() => {
                const handleResize = () => chartInstanceRef.current && chartInstanceRef.current.resize();
                window.addEventListener('resize', handleResize);
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const handleBack = () => {
                setViewMode('china');
                setCurrentProvince(null);
                setSelectedProvinceInfo(null); 
            };

            return (
                <div className="flex flex-col h-screen bg-slate-50 font-sans text-slate-800 overflow-hidden relative">
                    <header className="bg-white shadow-sm border-b border-slate-200 px-6 py-4 flex items-center justify-between z-10 shrink-0 relative">
                        <div className="flex items-center space-x-3">
                            {viewMode === 'province' ? (
                                <button onClick={handleBack} className="flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg transition-colors text-sm font-medium">
                                    <ArrowLeft size={16} /> ËøîÂõûÂÖ®ÂõΩ
                                </button>
                            ) : (
                                <div className={`bg-gradient-to-br ${currentPalette.gradientFrom} ${currentPalette.gradientTo} p-2.5 rounded-xl text-white shadow-md transition-all duration-500`}>
                                    <Activity size={24} />
                                </div>
                            )}
                            
                            <div>
                                <h1 className="text-xl font-bold text-slate-900 tracking-tight">
                                    {viewMode === 'province' ? `${currentProvince}ËØ¶ÊÉÖ` : (marketType === 'frequency' ? '‰∫åÊ¨°Ë∞ÉÈ¢ëÂ∏ÇÂú∫ÁÉ≠ÂäõÂõæ' : 'ÁîµËÉΩÈáèÂ∏ÇÂú∫ÁÉ≠ÂäõÂõæ')}
                                </h1>
                                <div className="flex items-center gap-2 text-xs text-slate-500 mt-0.5">
                                    <span className={`px-1.5 py-0.5 rounded border flex items-center gap-1 ${currentPalette.iconBg} ${currentPalette.iconText} ${currentPalette.iconBorder}`}>
                                        {viewMode === 'province' ? <MapIcon size={12} /> : <Zap size={12} fill="currentColor" />}
                                        <span>{viewMode === 'province' ? 'ÁúÅÂÜÖÂæÆËßÇËßÜËßí' : 'ÂÖ®ÂõΩÂÆèËßÇËßÜËßí'}</span>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </header>

                    <div className="flex-1 relative w-full h-full overflow-hidden">
                        <div className="w-full h-full bg-slate-50 flex">
                            
                            {/* --- Â∑¶‰æß‰º∏Áº©Èù¢Êùø --- */}
                            <div className={`absolute left-0 top-0 bottom-0 z-40 bg-white/95 backdrop-blur shadow-xl border-r border-slate-200 transition-all duration-300 ease-in-out flex flex-col ${isSidebarOpen ? 'w-72 translate-x-0' : 'w-0 -translate-x-full overflow-hidden'}`}>
                                <div className="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50 shrink-0">
                                    <div className="flex items-center gap-2 text-slate-700 font-bold">
                                        <Layers size={18} />
                                        <span>Â∏ÇÂú∫ËßÜÂõæÂàáÊç¢</span>
                                    </div>
                                </div>
                                
                                <div className="p-4 overflow-y-auto flex-1 space-y-6">
                                    
                                    {/* 0. Â∏ÇÂú∫Á±ªÂûãÂàáÊç¢Âô® (Ê†∏ÂøÉÂäüËÉΩ) */}
                                    <div className="p-1 bg-slate-100 rounded-lg flex gap-1">
                                        <button 
                                            onClick={() => setMarketType('frequency')}
                                            className={`flex-1 py-2 px-2 rounded-md text-xs font-bold transition-all flex items-center justify-center gap-1 ${marketType === 'frequency' ? 'bg-white text-red-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}
                                        >
                                            <Activity size={14} /> ‰∫åÊ¨°Ë∞ÉÈ¢ë
                                        </button>
                                        <button 
                                            onClick={() => setMarketType('energy')}
                                            className={`flex-1 py-2 px-2 rounded-md text-xs font-bold transition-all flex items-center justify-center gap-1 ${marketType === 'energy' ? 'bg-white text-indigo-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}
                                        >
                                            <BatteryCharging size={14} /> ÁîµËÉΩÈáè
                                        </button>
                                    </div>

                                    {/* 1. Êî∂Áõä/ÁÉ≠Â∫¶Âõæ‰æã */}
                                    {viewMode === 'china' && (
                                        <div className="space-y-3 animate-in fade-in slide-in-from-left-4 duration-500">
                                            <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">
                                                {marketType === 'frequency' ? 'Ë∞ÉÈ¢ëÊî∂Áõä (ÁÉ≠Â∫¶)' : 'ÁîµËÉΩÈáèËßÑÊ®° (ÁÉ≠Â∫¶)'}
                                            </div>
                                            <div className="flex items-center gap-3">
                                                <div className={`h-32 w-2 rounded-full shadow-inner bg-gradient-to-b ${marketType === 'frequency' ? 'from-[#991b1b] via-[#ea580c] to-[#fef08a]' : 'from-[#1e1b4b] via-[#4338ca] to-[#a5b4fc]'}`}></div>
                                                <div className="flex flex-col justify-between h-32 text-xs text-slate-600 font-medium">
                                                    <span>È´ò</span>
                                                    <span>‰∏≠È´ò</span>
                                                    <span>‰∏≠</span>
                                                    <span>‰∏≠‰Ωé</span>
                                                    <span>‰Ωé</span>
                                                </div>
                                            </div>
                                        </div>
                                    )}

                                    <div className="border-t border-slate-100"></div>

                                    {/* 2. ËÉΩÊ∫êÂü∫Âú∞Á±ªÂûãÂõæ‰æã */}
                                    <div className="space-y-3">
                                        <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">ËÉΩÊ∫êÂü∫Âú∞Âõæ‰æã</div>
                                        <div className="space-y-2 text-xs text-slate-700">
                                            {Object.entries(pointTypeConfig).map(([key, cfg]) => (
                                                <div key={key} className="flex items-center gap-2 p-2 rounded hover:bg-slate-50 transition-colors">
                                                    {cfg.symbol === 'circle' && <div className="w-3 h-3 rounded-full border border-white shadow-sm flex-shrink-0" style={{backgroundColor: cfg.color}}></div>}
                                                    {cfg.symbol === 'rect' && <div className="w-3 h-3 border border-white shadow-sm flex-shrink-0" style={{backgroundColor: cfg.color}}></div>}
                                                    {cfg.symbol === 'triangle' && <div className="w-3 h-3 border border-white shadow-sm flex-shrink-0" style={{backgroundColor: cfg.color, clipPath: 'polygon(50% 0%, 0% 100%, 100% 100%)'}}></div>}
                                                    {cfg.symbol === 'diamond' && <div className="w-3 h-3 border border-white shadow-sm flex-shrink-0 rotate-45" style={{backgroundColor: cfg.color}}></div>}
                                                    <span>{cfg.label}</span>
                                                </div>
                                            ))}
                                            <div className="flex items-center gap-2 p-2 rounded hover:bg-slate-50 transition-colors">
                                                <div className="w-8 h-3 bg-slate-300 rounded border border-white shadow-sm flex items-center justify-center relative flex-shrink-0">
                                                    <div className="w-6 h-1 bg-slate-400/50 rounded-full"></div>
                                                </div>
                                                <span className="text-slate-500">Ëµ∞Âªä/‰∫ß‰∏öÂ∏¶</span>
                                            </div>
                                        </div>
                                    </div>

                                    {/* 3. Ê¢ØÈòü‰ø°ÊÅØ (‰ªÖË∞ÉÈ¢ëÊòæÁ§∫) */}
                                    {marketType === 'frequency' && viewMode === 'china' && (
                                        <>
                                            <div className="border-t border-slate-100"></div>
                                            <div className="space-y-3">
                                                <div className="text-xs font-bold text-slate-500 uppercase tracking-wider">ÊΩúÂú®Â∏ÇÂú∫ (Ê¢ØÈòü)</div>
                                                <div className="space-y-2 text-xs text-slate-700">
                                                    <div className="flex items-center gap-2"><div className="w-2.5 h-2.5 rounded bg-[#1d4ed8]"></div><span>Á¨¨‰∏ÄÊ¢ØÈòü</span></div>
                                                    <div className="flex items-center gap-2"><div className="w-2.5 h-2.5 rounded bg-[#60a5fa]"></div><span>Á¨¨‰∫åÊ¢ØÈòü</span></div>
                                                    <div className="flex items-center gap-2"><div className="w-2.5 h-2.5 rounded bg-[#bfdbfe]"></div><span>Á¨¨‰∏âÊ¢ØÈòü</span></div>
                                                </div>
                                            </div>
                                        </>
                                    )}
                                    
                                    <div className="pt-4 text-center">
                                        <div className="text-[10px] text-slate-300 border border-dashed border-slate-200 rounded p-2 hover:border-slate-300 hover:text-slate-400 cursor-pointer transition-colors">
                                            + Ê∑ªÂä†Êõ¥Â§öÁ≠õÈÄâÂô® (È¢ÑÁïô)
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <button 
                                onClick={() => setIsSidebarOpen(!isSidebarOpen)}
                                className={`absolute top-4 z-30 bg-white p-2 rounded-r-lg shadow-md border border-l-0 border-slate-200 text-slate-500 hover:text-slate-800 hover:bg-slate-50 transition-all duration-300 ${isSidebarOpen ? 'left-72' : 'left-0'}`}
                            >
                                {isSidebarOpen ? <ChevronLeft size={16} /> : <ChevronRight size={16} />}
                            </button>

                            <div className="flex-1 relative">
                                {loading && (
                                    <div className="absolute inset-0 flex flex-col items-center justify-center text-slate-400 gap-3 bg-slate-50 z-50">
                                        <div className="w-8 h-8 border-4 border-current border-t-transparent rounded-full animate-spin text-blue-500"></div>
                                        <span className="text-sm">Ê≠£Âú®ÈáçÁªòÂú∞Âõæ...</span>
                                    </div>
                                )}
                                <div ref={mapContainerRef} className="w-full h-full cursor-pointer" />
                            </div>
                        </div>

                        {/* Âè≥‰æßËØ¶ÊÉÖÈù¢Êùø */}
                        <div className={`absolute right-0 top-0 bottom-0 z-30 w-full md:w-[400px] bg-white shadow-2xl md:border-l border-slate-200 transform transition-transform duration-300 ease-in-out flex flex-col ${selectedProvinceInfo ? 'translate-x-0' : 'translate-x-full'}`}>
                            {selectedProvinceInfo && (
                                <>
                                    <div className="p-6 border-b border-slate-100 flex justify-between items-start bg-gradient-to-br from-slate-50 to-white">
                                        <div>
                                            <div className="flex items-center gap-2 mb-1"><h2 className="text-2xl font-bold text-slate-800">{selectedProvinceInfo.title}</h2></div>
                                            <div className="flex flex-wrap gap-2 mt-2">
                                                {selectedProvinceInfo.totalVolume && <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-bold border shadow-sm ${marketType === 'frequency' ? 'bg-red-100 text-red-700 border-red-200' : 'bg-indigo-100 text-indigo-700 border-indigo-200'}`}>ÊÄªÈáè: {selectedProvinceInfo.totalVolume}</span>}
                                                {selectedProvinceInfo.tags && selectedProvinceInfo.tags.map((tag, i) => <span key={i} className="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-slate-100 text-slate-600 border border-slate-200">{tag}</span>)}
                                            </div>
                                        </div>
                                        <button onClick={() => setSelectedProvinceInfo(null)} className="p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition-all"><X size={24} /></button>
                                    </div>
                                    <div className="p-6 overflow-y-auto space-y-6 flex-1 bg-white">
                                        {/* Âä®ÊÄÅÂç°ÁâáÈ¢úËâ≤ */}
                                        <div className={`rounded-xl p-5 border shadow-sm relative overflow-hidden ${marketType === 'frequency' ? 'bg-white border-red-100 shadow-red-50/50' : 'bg-white border-indigo-100 shadow-indigo-50/50'}`}>
                                            {selectedProvinceInfo.heatValue > 0 && <div className={`absolute top-0 right-0 w-16 h-16 bg-gradient-to-bl -mr-4 -mt-4 rounded-full opacity-50 ${marketType === 'frequency' ? 'from-red-50' : 'from-indigo-50'}`}></div>}
                                            <div className={`flex items-center gap-2 font-semibold mb-3 ${marketType === 'frequency' ? 'text-red-600' : 'text-indigo-600'}`}>
                                                {marketType === 'frequency' ? <Coins size={20} /> : <Zap size={20} />}
                                                <span>{marketType === 'frequency' ? 'Ë∞ÉÈ¢ëÊî∂ÁõäÊ¶ÇËßà' : 'ÁîµËÉΩÈáèÂ∏ÇÂú∫Ê¶ÇËßà'}</span>
                                            </div>
                                            <p className="text-lg text-slate-800 font-medium leading-relaxed">{selectedProvinceInfo.marketVolumeDisplay}</p>
                                        </div>
                                        
                                        {selectedProvinceInfo.details && (
                                            <div className="space-y-4">
                                                <div className="flex items-center gap-2 text-xs font-bold text-slate-400 uppercase tracking-wider"><BarChart3 size={14} />ËØ¶ÁªÜÊï∞ÊçÆ / Ë∞ÉÁ†îÊÉÖÂÜµ</div>
                                                <div className="bg-slate-50 rounded-xl border border-slate-100 divide-y divide-slate-100">
                                                    {selectedProvinceInfo.details.map((item, idx) => (
                                                        <div key={idx} className="p-4 flex flex-col gap-1.5 hover:bg-slate-50/80 transition-colors">
                                                            <span className="text-xs text-slate-500 font-medium flex items-center gap-1"><span className="w-1 h-1 rounded-full bg-slate-400"></span>{item.label}</span>
                                                            <span className="text-slate-900 text-sm leading-relaxed pl-2 border-l-2 border-slate-200">{item.value}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<EnergyMarketMap />);
    </script>
</body>

</html>
